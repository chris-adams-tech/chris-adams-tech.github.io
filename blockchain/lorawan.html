<!DOCTYPE html> <html><head>
		<title>LoRaWAN</title>
		<base href="../">
		<meta id="root-path" root-path="../">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=5.0">
		<meta charset="UTF-8">
		<meta name="description" content="Chris Adams Cyber Garden - LoRaWAN">
		<meta property="og:title" content="LoRaWAN">
		<meta property="og:description" content="Chris Adams Cyber Garden - LoRaWAN">
		<meta property="og:type" content="website">
		<meta property="og:url" content="https://chris-adams-tech.github.io/blockchain/lorawan.html">
		<meta property="og:image" content="undefined">
		<meta property="og:site_name" content="Chris Adams Cyber Garden">
		<meta name="author" content="Chris Adams"><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="https://chris-adams-tech.github.io/lib/rss.xml"><script async="" id="webpage-script" src="lib/scripts/webpage.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script type="module" async="" id="graph-view-script" src="lib/scripts/graph-view.js"></script><script async="" id="graph-wasm-script" src="lib/scripts/graph-wasm.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="graph-render-worker-script" src="lib/scripts/graph-render-worker.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="tinycolor-script" src="lib/scripts/tinycolor.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="pixi-script" src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/7.4.0/pixi.min.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="minisearch-script" src="https://cdn.jsdelivr.net/npm/minisearch@6.3.0/dist/umd/index.min.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><link rel="icon" href="lib/media/favicon.png"><script async="" id="graph-data-script" src="lib/scripts/graph-data.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><style>body{--line-width:40em;--line-width-adaptive:40em;--file-line-width:40em;--sidebar-width:min(20em, 80vw);--collapse-arrow-size:11px;--tree-horizontal-spacing:0.6em;--tree-vertical-spacing:0.6em;--sidebar-margin:12px}.sidebar{height:100%;min-width:calc(var(--sidebar-width) + var(--divider-width-hover));max-width:calc(var(--sidebar-width) + var(--divider-width-hover));font-size:14px;z-index:10;position:relative;overflow:hidden;transition:min-width ease-in-out,max-width ease-in-out;transition-duration:.2s;contain:size}.sidebar-left{left:0}.sidebar-right{right:0}.sidebar.is-collapsed{min-width:0;max-width:0}body.floating-sidebars .sidebar{position:absolute}.sidebar-content{height:100%;min-width:calc(var(--sidebar-width) - var(--divider-width-hover));top:0;padding:var(--sidebar-margin);padding-top:4em;line-height:var(--line-height-tight);background-color:var(--background-secondary);transition:background-color,border-right,border-left,box-shadow;transition-duration:var(--color-fade-speed);transition-timing-function:ease-in-out;position:absolute;display:flex;flex-direction:column}.sidebar:not(.is-collapsed) .sidebar-content{min-width:calc(max(100%,var(--sidebar-width)) - 3px);max-width:calc(max(100%,var(--sidebar-width)) - 3px)}.sidebar-left .sidebar-content{left:0;border-top-right-radius:var(--radius-l);border-bottom-right-radius:var(--radius-l)}.sidebar-right .sidebar-content{right:0;border-top-left-radius:var(--radius-l);border-bottom-left-radius:var(--radius-l)}.sidebar:has(.sidebar-content:empty):has(.topbar-content:empty){display:none}.sidebar-topbar{height:2em;width:var(--sidebar-width);top:var(--sidebar-margin);padding-inline:var(--sidebar-margin);z-index:1;position:fixed;display:flex;align-items:center;transition:width ease-in-out;transition-duration:inherit}.sidebar.is-collapsed .sidebar-topbar{width:calc(2.3em + var(--sidebar-margin) * 2)}.sidebar .sidebar-topbar.is-collapsed{width:0}.sidebar-left .sidebar-topbar{left:0}.sidebar-right .sidebar-topbar{right:0}.topbar-content{overflow:hidden;overflow:clip;width:100%;height:100%;display:flex;align-items:center;transition:inherit}.sidebar.is-collapsed .topbar-content{width:0;transition:inherit}.clickable-icon.sidebar-collapse-icon{background-color:transparent;color:var(--icon-color-focused);padding:0!important;margin:0!important;height:100%!important;width:2.3em!important;margin-inline:0.14em!important;position:absolute}.sidebar-left .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);right:var(--sidebar-margin)}.sidebar-right .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);left:var(--sidebar-margin)}.clickable-icon.sidebar-collapse-icon svg.svg-icon{width:100%;height:100%}.sidebar-section-header{margin:0 0 1em 0;text-transform:uppercase;letter-spacing:.06em;font-weight:600}body{transition:background-color var(--color-fade-speed) ease-in-out}.webpage-container{display:flex;flex-direction:row;height:100%;width:100%;align-items:stretch;justify-content:center}.document-container{opacity:1;flex-basis:100%;max-width:100%;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;transition:opacity .2s ease-in-out;contain:inline-size}.hide{opacity:0;transition:opacity .2s ease-in-out}.document-container>.markdown-preview-view{margin:var(--sidebar-margin);margin-bottom:0;width:100%;width:-webkit-fill-available;width:-moz-available;width:fill-available;background-color:var(--background-primary);transition:background-color var(--color-fade-speed) ease-in-out;border-top-right-radius:var(--window-radius,var(--radius-m));border-top-left-radius:var(--window-radius,var(--radius-m));overflow-x:hidden!important;overflow-y:auto!important;display:flex!important;flex-direction:column!important;align-items:center!important;contain:inline-size}.document-container>.markdown-preview-view>.markdown-preview-sizer{padding-bottom:80vh!important;width:100%!important;max-width:var(--line-width)!important;flex-basis:var(--line-width)!important;transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}.markdown-rendered img:not([width]),.view-content img:not([width]){max-width:100%;outline:0}.document-container>.view-content.embed{display:flex;padding:1em;height:100%;width:100%;align-items:center;justify-content:center}.document-container>.view-content.embed>*{max-width:100%;max-height:100%;object-fit:contain}:has(> :is(.math,table)){overflow-x:auto!important}.document-container>.view-content{overflow-x:auto;contain:content;padding:0;margin:0;height:100%}.scroll-highlight{position:absolute;width:100%;height:100%;pointer-events:none;z-index:1000;background-color:hsla(var(--color-accent-hsl),.25);opacity:0;padding:1em;inset:50%;translate:-50% -50%;border-radius:var(--radius-s)}</style><script defer="">async function loadIncludes(){if("file:"!=location.protocol){let e=document.querySelectorAll("include");for(let t=0;t<e.length;t++){let o=e[t],l=o.getAttribute("src");try{const e=await fetch(l);if(!e.ok){console.log("Could not include file: "+l),o?.remove();continue}let t=await e.text(),n=document.createRange().createContextualFragment(t),i=Array.from(n.children);for(let e of i)e.classList.add("hide"),e.style.transition="opacity 0.5s ease-in-out",setTimeout((()=>{e.classList.remove("hide")}),10);o.before(n),o.remove(),console.log("Included file: "+l)}catch(e){o?.remove(),console.log("Could not include file: "+l,e);continue}}}else{if(document.querySelectorAll("include").length>0){var e=document.createElement("div");e.id="error",e.textContent="Web server exports must be hosted on an http / web server to be viewed correctly.",e.style.position="fixed",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.fontSize="1.5em",e.style.fontWeight="bold",e.style.textAlign="center",document.body.appendChild(e),document.querySelector(".document-container")?.classList.remove("hide")}}}document.addEventListener("DOMContentLoaded",(()=>{loadIncludes()}));let isFileProtocol="file:"==location.protocol;function waitLoadScripts(e,t){let o=e.map((e=>document.getElementById(e+"-script"))),l=0;!function e(){let n=o[l];l++,n&&"true"!=n.getAttribute("loaded")||l<o.length&&e(),l<o.length?n.addEventListener("load",e):t()}()}</script><link rel="stylesheet" href="lib/styles/obsidian.css"><link rel="preload" href="lib/styles/other-plugins.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/other-plugins.css"></noscript><link rel="stylesheet" href="lib/styles/theme.css"><link rel="preload" href="lib/styles/global-variable-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/global-variable-styles.css"></noscript><link rel="preload" href="lib/styles/main-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/main-styles.css"></noscript><link rel="preload" href="lib/styles/snippets.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/snippets.css"></noscript></head><body class="publish css-settings-manager theme-dark show-inline-title show-ribbon ctp-latte ctp-mocha ctp-accent-light-sapphire ctp-accent-peach anuppuccin-accent-toggle anp-current-line-border anp-callout-sleek anp-custom-checkboxes anp-speech-bubble anp-codeblock-numbers anp-table-toggle anp-hide-external-link-icon anp-h1-red anp-h2-peach anp-h3-green anp-h4-teal anp-h5-lavender anp-h6-mauve anp-bold-red anp-italic-green anp-highlight-yellow anp-canvas-dark-bg"><script defer="">let theme=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");"dark"==theme?(document.body.classList.add("theme-dark"),document.body.classList.remove("theme-light")):(document.body.classList.add("theme-light"),document.body.classList.remove("theme-dark")),window.innerWidth<480?document.body.classList.add("is-phone"):window.innerWidth<768?document.body.classList.add("is-tablet"):window.innerWidth<1024?document.body.classList.add("is-small-screen"):document.body.classList.add("is-large-screen")</script><div class="webpage-container workspace"><div class="sidebar-left sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"><label class="theme-toggle-container" for="theme_toggle"><input class="theme-toggle-input" type="checkbox" id="theme_toggle"><div class="toggle-background"></div></label></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content"><div class="search-input-container"><input enterkeyhint="search" type="search" spellcheck="false" placeholder="Search..."><div class="search-input-clear-button" aria-label="Clear search"></div></div><include src="lib/html/file-tree.html"></include></div><script defer="">let ls = document.querySelector(".sidebar-left"); ls.classList.add("is-collapsed"); if (window.innerWidth > 768) ls.classList.remove("is-collapsed"); ls.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-left-width"));</script></div><div class="document-container markdown-reading-view hide"><div class="markdown-preview-view markdown-rendered allow-fold-headings allow-fold-lists is-readable-line-width"><style id="MJX-CHTML-styles"></style><pre class="frontmatter language-yaml" tabindex="0" style="display: none;"><code class="language-yaml is-loaded"><span class="token key atrule">tags</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> networking
  <span class="token punctuation">-</span> decentralized</code><button class="copy-code-button">Copy</button></pre><div class="markdown-preview-sizer markdown-preview-section"><h1 class="page-title heading inline-title" id="LoRaWAN">LoRaWAN</h1><div class="el-p"><p dir="auto"><strong>Technical Notes:</strong><br>
<strong>LoRa</strong> ("long-range") - wireless communication solution without networking capabilities</p></div><div class="el-ul"><ul>
<li data-line="0" dir="auto">reliable, energy efficient, encryption-secured, low-cost wireless connectivity technlogy</li>
<li data-line="1" dir="auto">extremely long range<br>
<strong>LoRa</strong> operates at the <em>physical</em> layer of the OSI model</li>
<li data-line="3" dir="auto">implemented at the chip level</li>
<li data-line="4" dir="auto"><div class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>excludes network management protocol
<ul>
<li data-line="5" dir="auto">advantage for system engineers to implement data link and network layer protocols over LoRa modulation and according to requirements of a particular application</li>
</ul>
</li>
<li data-line="6" dir="auto">LoRaWAN is an open LPWAN protocol designed to operate on the LoRa modulation, adding data links and network layer protocols. The protocol is responsible for the configuration of end devices and the management of peer-to-peer data communication.</li>
</ul></div><div class="el-p"><p dir="auto"><strong>LoRaWAN Network Elements:</strong></p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto"><div class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><strong>End Devices</strong> - sensors, actuators, or both
<ul>
<li data-line="1" dir="auto">contain a chip for LoRa RF modulation and communicate wirelessly using LoRa technology.</li>
<li data-line="2" dir="auto"><div class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>most are battery-operated as part of an IoT network
<ul>
<li data-line="3" dir="auto">connects with LoRaWAN network through gateways</li>
</ul>
</li>
<li data-line="4" dir="auto"><div class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>end devices follow random-access protocol, ALOHA
<ul>
<li data-line="5" dir="auto">can access the network through one or many nearby gateways within range</li>
</ul>
</li>
</ul>
</li>
<li data-line="6" dir="auto"><strong>Gateways</strong> - responsible for forwarding messages to and from end devices to a network server<br>
- has an IP backbone that's cellular (3G/4G/5G), fiber optic, Ethernet, WiFi, or 2.4GHz radio link, which connects to the server<br>
- each gateway is registered with one LoRaWAN network server<br>
<strong>Operations:</strong></li>
<li data-line="10" dir="auto">end device transmits an uplink message</li>
<li data-line="11" dir="auto">it's then received by all nearby gateways within its range</li>
<li data-line="12" dir="auto"><div class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>message is forwarded to the network server
<ul>
<li data-line="13" dir="auto">this is where it is singled out by de-duplication</li>
<li data-line="14" dir="auto">this network architecture of the end devices and gateways ensures the accuracy of the uplink packet and serves as a low-cost localization</li>
</ul>
</li>
<li data-line="15" dir="auto">when the gateway received a downlink packet for delivery to an end device, the payload is passed without interruption<br>
The gateways operate at the physical layer of the OSI model and serve as LoRa RF message forwarders.</li>
</ol></div><div class="el-p"><p dir="auto"><strong>Gateways</strong> are broadly classified into indoor and outdoor gateways. The eight or 16-channel indoor gateways have no antenna and, therefore, lower receiver sensitivity and range than the outdoor ones. Indoor gateways are ideal for multi-story buildings and deep-indoor locations.</p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto"><div class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>
<p><strong>Network Server</strong> - server-side software for LoRa network management, managing data communication between the end devices (connected to the network via gateways) and the application server</p>
<ul>
<li data-line="2" dir="auto">server authenticates end devices, de-duplicate uplink messages, encrypts uplink and downlink messages between end devices and application servers, and confirms the uplink messages</li>
<li data-line="3" dir="auto"><div class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>responsible for device addressing within LoRa network through ADR commands
<ul>
<li data-line="4" dir="auto">routes downlink messages to end devices through appropriate gateways</li>
</ul>
</li>
<li data-line="5" dir="auto">only server that forwards join-request and join-accept messages between the end devices and the join server</li>
</ul>
</li>
<li data-line="9" dir="auto"><div class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>
<p><strong>Application Server</strong> - server-side software responsible for running main application and providing cloud-based business solution</p>
<ul>
<li data-line="11" dir="auto"><div class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>several applications can be connected to network server
<ul>
<li data-line="12" dir="auto">each can run a specific server-side application</li>
</ul>
</li>
<li data-line="13" dir="auto">receives application-specific uplink data messages from end devices via network server, process application data, and return results as application-layer downlink payload</li>
</ul>
</li>
<li data-line="17" dir="auto"><div class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>
<p><strong>Join Server</strong> - server-side software responsible for processing join-request and join-accept messages between end devices and the application server</p>
<ul>
<li data-line="18" dir="auto">introduced with LoRaWAN v1.1 for LoRa architecture to enable OTAA</li>
<li data-line="19" dir="auto">end devices require activation by means of network and application session keys</li>
<li data-line="20" dir="auto">join server processes join-request messages, generates application session keys, transfers network and application keys to the network server and application server, and enables end-device activation</li>
</ul>
</li>
</ol></div><div class="el-ul"><ul>
<li data-line="0" dir="auto">The end devices connected to a LoRa network are activated in two ways, Activation by Personalization (ABP) and Over-The-Air Activation (OTAA). ABP provides hard-coding end devices with keys to configure and join a LoRa network. However, it has security issues and lacks capabilities for online updates.</li>
</ul></div><div class="el-p"><p dir="auto"><strong>3 Types of LoRaWAN Device Classes</strong></p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto"><div class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Class A - implemented in all LoRaWAN end devices
<ul>
<li data-line="1" dir="auto">primarily in sleep modes and only communicate with the application server intermittently</li>
</ul>
</li>
<li data-line="2" dir="auto"><div class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Class B - devices have a scheduled receive window for periodic downlink payloads from the application server
<ul>
<li data-line="3" dir="auto"><div class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>the devices are configured to open the receive windows in response to time-synchronized beacons from the network server
<ul>
<li data-line="4" dir="auto">also have Class A implementation and open two short receive windows after each uplink transmission</li>
</ul>
</li>
<li data-line="5" dir="auto">devices are intermittently active, have shorter batter life and lower latency than Class A</li>
<li data-line="6" dir="auto">often used for sensor data logging or reporting</li>
</ul>
</li>
<li data-line="7" dir="auto">Class C - continuously active receive window, enabling them to get downlink payloads without any latency<br>
- LoRaWAN devices have half-duplex bidirectional data communication<br>
- cannot receive downlink payloads when transmitting uplink messages<br>
<strong>Message Types:</strong></li>
</ol></div><div class="el-pre"><pre class="language-plain" tabindex="0"><code data-line="0" class="language-plain is-loaded">Uplink messages are transmitted by end devices for the join or application server. Messages sent to a join server typically contain MAC commands. Those communicated to the application server usually contain MAC commands and/or application data. Messages are received by the network server through multiple gateways and routed to a join or application server based on the MAC message type.
Downlink messages are sent by the network server to end devices. The message is relayed through a single gateway by the network server to render it to an end device.
</code><button class="copy-code-button">Copy</button></pre></div><div class="el-p"><p dir="auto"><strong>MAC Message Types</strong></p></div><div class="el-pre"><pre class="language-plain" tabindex="0"><code data-line="0" class="language-plain is-loaded">Join-request: An uplink message by an end device for OTAA activation.
Join-accept: A downlink message from a join server for the OTAA activation of an end device.
Rejoin-request: An uplink message to rejoin the LoRA network from an end device. This message type is reserved in LoRaWAN v1.0 but available in LoRaWAN v1.1.
Unconfirmed data up: An uplink data frame in which confirmation is not required.
Unconfirmed data down: A downlink data frame in which confirmation is not required.
Confirmed data up: An uplink data frame from the end device whereby confirmation (i.e. acknowledgement from the network server) is requested.
Confirmed data down: A downlink data frame from the network server whereby confirmation is requested.
Proprietary: A non-standard proprietary message.
</code><button class="copy-code-button">Copy</button></pre></div><div class="el-p"><p dir="auto">LoRaWAN Security<br>
Uplink messages are communicated to multiple gateways and de-duplicated at the network server, leaving no chance for data corruption. The network communication is secured with 128-bit security keys, including NwkSKey, AppSKey, and AppKey. The algorithm AES-128 is used to encrypt messages, which is similar to the encryption in WiFi standard IEEE 802.15.4. With OTAA activation, there’s essentially no possibility of device hacking or man-in-the-middle attacks.<br>
For unique identification, an <strong>AppKey</strong> is shared only between application server and end devices</p></div><div class="el-ul"><ul>
<li data-line="0" dir="auto">default application key used for activation of multiple devices or custom application keys generated per end device</li>
<li data-line="1" dir="auto">key is used to generate network and application session keys<br>
Process:</li>
</ul></div><div class="el-ol"><ol>
<li data-line="0" dir="auto">Device joins network<br>
1. network server generates two security keys<br>
1. network session key (NwkSKey)<br>
2. application session key (AppSKey)<br>
- these keys are applicable only during a single session<br>
2. network session key is shared and used to authenticate the end device within network server
<pre><code data-line="7">    1. key maps non-unique device addresses to 64-bit Extended Unique Identifiers with DevEUI and App EUI
    2. only authorized end device can join the LoRa network because of the network session key
        1. Message Integrity Code (MIC) uses the same key, which serves as a checksum to validate message integrity
    
    Application session key encrypts and decrypts downlink payloads between the end devices and the application server
    
    - private key is never shared within the network, so only authorized end device can transmit or receive messages with the application server
</code><button class="copy-code-button">Copy</button></pre>
<code>In OTAA activation, both session keys generate a unique per-device session. In ABP activation, the keys are regenerated only when explicitly changed.</code><br>
<strong>The data security is further manifolded by using frame counters. There are frame counters for both uplink and downlink messages. When an end device is activated, both frame counters are set to 0. When an uplink message is transmitted, the respective frame counter is updated.</strong><br>
<strong>Similarly, the downlink frame counter is immediately updated when an end device receives a downlink payload. The end devices and the application server ignore any message containing a frame counter value lower than the updated frame counters.</strong></li>
</ol></div><div class="el-p"><p dir="auto">Resources:<br>
<a rel="noopener nofollow" class="external-link" href="https://lora-alliance.org/resource_hub/what-is-lorawan/" target="_blank">https://lora-alliance.org/resource_hub/what-is-lorawan/</a> - technical overview<br>
<a rel="noopener nofollow" class="external-link" href="https://www.engineersgarage.com/lorawan-network-architecture/" target="_blank">https://www.engineersgarage.com/lorawan-network-architecture/</a> - used for above documentation<br>
<a rel="noopener nofollow" class="external-link" href="https://lora-alliance.org/lora-alliance-press-release/lorawan-formally-recognized-as-itu-international-standard-for-low-power-wide-area-networking/" target="_blank">https://lora-alliance.org/lora-alliance-press-release/lorawan-formally-recognized-as-itu-international-standard-for-low-power-wide-area-networking/</a> - LoRaWAN Alliance<br>
<a rel="noopener nofollow" class="external-link" href="https://www.thethingsnetwork.org/docs/lorawan/" target="_blank">https://www.thethingsnetwork.org/docs/lorawan/</a> - LoRaWAN learning videos<br>
<a rel="noopener nofollow" class="external-link" href="https://lora-developers.semtech.com/build/software/lora-basics" target="_blank">https://lora-developers.semtech.com/build/software/lora-basics</a> - helpful concepts<br>
<a rel="noopener nofollow" class="external-link" href="https://lora-alliance.org/resource_hub/rp2-102-lorawan-regional-parameters/" target="_blank">https://lora-alliance.org/resource_hub/rp2-102-lorawan-regional-parameters/</a> - regional specifications and parameters</p></div><div class="el-p"><span style="display: block; margin-block-start: var(--p-spacing); margin-block-end: var(--p-spacing);"><span alt="Writeup Created By Info" src="Writeup Created By Info" class="internal-embed markdown-embed inline-embed is-loaded"><div class="embed-title markdown-embed-title">Writeup Created By Info</div><div class="markdown-embed-content node-insert-event"><div class="markdown-preview-view markdown-rendered node-insert-event show-indentation-guide allow-fold-headings allow-fold-lists"><div class="markdown-preview-sizer markdown-preview-section" style="padding-bottom: 0px; min-height: 129px;"><div class="markdown-preview-pusher" style="width: 1px; height: 0.1px; margin-bottom: 0px;"></div><div class="mod-header mod-ui"></div><div class="el-pre mod-frontmatter mod-ui"><pre class="frontmatter language-yaml" tabindex="0" style="display: none;"><code class="language-yaml is-loaded"><span class="token key atrule">layout</span><span class="token punctuation">:</span> default
<span class="token key atrule">Owner</span><span class="token punctuation">:</span> Chris Adams
<span class="token key atrule">Last edited time</span><span class="token punctuation">:</span> <span class="token datetime number">2024-10-21</span></code><button class="copy-code-button">Copy</button></pre></div><div class="el-blockquote"><blockquote dir="auto">
<p>Chris Adams<br>
Gmail: <a data-tooltip-position="top" aria-label="mailto:c.adams612@gmail.com" rel="noopener nofollow" class="external-link" href="mailto:c.adams612@gmail.com" target="_blank">c.adams612@gmail.com</a><br>
Proton: <a data-tooltip-position="top" aria-label="mailto:chris.cybertech@proton.me" rel="noopener nofollow" class="external-link" href="mailto:chris.cybertech@proton.me" target="_blank">chris.cybertech@proton.me</a><br>
LinkedIn: <a rel="noopener nofollow" class="external-link" href="https://www.linkedin.com/in/christoph-adams/" target="_blank">https://www.linkedin.com/in/christoph-adams/</a><br>
GitHub: <a rel="noopener nofollow" class="external-link" href="https://github.com/chris-adams-tech/" target="_blank">https://github.com/chris-adams-tech/</a></p>
</blockquote></div></div></div></div><div class="markdown-embed-content node-insert-event" style="display: none;"></div><div class="markdown-embed-link" aria-label="Open link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></div></span></span></div><div class="mod-footer mod-ui"></div></div></div></div><div class="sidebar-right sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content"><div class="graph-view-wrapper"><div class="sidebar-section-header">Interactive Graph</div><div class="graph-view-placeholder">
		<div class="graph-view-container">
			<div class="graph-icon graph-expand" role="button" aria-label="Expand" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline></svg></div>
			<canvas id="graph-canvas" class="hide" width="512px" height="512px"></canvas>
		</div>
		</div></div><div class="tree-container mod-root nav-folder tree-item outline-tree" data-depth="0"><div class="tree-header"><span class="sidebar-section-header">Table Of Contents</span><button class="clickable-icon collapse-tree-button is-collapsed" aria-label="Collapse All"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-scroll-area tree-item-children nav-folder-children"><div class="tree-item mod-tree-folder nav-folder mod-collapsible is-collapsed" style="display: none;"></div><div class="tree-item" data-depth="1"><a class="tree-link" href="blockchain\lorawan.html#LoRaWAN"><div class="tree-item-contents heading-link" heading-name="LoRaWAN"><span class="tree-item-title">LoRaWAN</span></div></a><div class="tree-item-children nav-folder-children"></div></div></div></div></div><script defer="">let rs = document.querySelector(".sidebar-right"); rs.classList.add("is-collapsed"); if (window.innerWidth > 768) rs.classList.remove("is-collapsed"); rs.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-right-width"));</script></div></div></body></html>